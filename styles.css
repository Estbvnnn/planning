/* Ultra simple, ultra épuré */
:root{
  --bg:#121214;
  --panel:#1c1d22;
  --muted:#8b8d97;
  --text:#eaeaf0;
  --accent:#7c5cff;
  --accent-2:#3a82f6;
  --danger:#ef4444;
  --card:#20222a;
  --ring:rgba(124,92,255,.35);
  --shadow: 0 6px 20px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html, body { height:100%; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font: 15px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans";
  -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; gap:.75rem;
  padding: env(safe-area-inset-top) 12px 12px 12px;
  background: rgba(18,18,20,.7); backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,.05);
}
.hamburger{ width:42px; height:36px; background:none; border:0; padding:0; display:flex; flex-direction:column; justify-content:center; gap:5px; cursor:pointer}
.hamburger span{ display:block; height:2px; background:#fff; width:22px; border-radius:2px; transition:transform .25s ease, opacity .25s ease }
.top-title{ font-weight:600; opacity:.9; letter-spacing:.5px }
.install-btn{ margin-left:auto; border:1px solid rgba(255,255,255,.12); background:none; color:var(--text); padding:.45rem .7rem; border-radius:10px; font-weight:600 }
.install-btn:active{ transform:scale(.98) }

/* Drawer */
.drawer{
  position:fixed; inset:0; width: 84%; max-width: 360px;
  transform: translateX(-120%);
  transition: transform .28s ease;
  background: var(--panel);
  box-shadow: var(--shadow);
  padding-top: env(safe-area-inset-top);
  display:flex; flex-direction:column;
}
.drawer.open{ transform: translateX(0); }
.drawer-header{ display:flex; align-items:center; justify-content:space-between; padding:16px 16px 8px 16px; border-bottom:1px solid rgba(255,255,255,.06)}
.drawer-header h2{ margin:0; font-size:18px }
.icon-btn{ border:0; background:none; color:var(--text); font-size:18px; opacity:.9 }
.drawer-section{ padding:14px 16px; border-bottom: 1px solid rgba(255,255,255,.06) }
.section-title{ font-size:12px; letter-spacing:.8px; color:var(--muted); text-transform:uppercase; margin-bottom:8px }
.year-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; max-height:30vh; overflow:auto }
.year-list button{ width:100%; text-align:left }
.drawer-footer{ padding:12px 16px; color:var(--muted) }

/* Buttons */
.primary-btn, .ghost-btn, .mini-btn, .fab, .big-plus, .file-btn{
  border:0; border-radius:14px; font-weight:600; cursor:pointer
}
.primary-btn{ background: linear-gradient(135deg, var(--accent), var(--accent-2)); color:#fff; padding:.7rem 1rem; box-shadow: var(--shadow) }
.ghost-btn{ background:rgba(255,255,255,.04); color:#fff; padding:.6rem .8rem; border:1px solid rgba(255,255,255,.06) }
.mini-btn{ background:rgba(255,255,255,.06); color:#fff; padding:.35rem .6rem; border-radius:10px; font-size:12px }
.mini-btn.danger{ background: rgba(239,68,68,.12); color:#fecaca }
.fab{ width:48px; height:48px; border-radius:16px; display:grid; place-items:center; font-size:22px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); color:#fff; box-shadow: var(--shadow) }
.big-plus{ width:84px; height:84px; border-radius:24px; display:grid; place-items:center; font-size:48px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); color:#fff; box-shadow: var(--shadow) }
.file-btn{ display:inline-grid; place-items:center; gap:6px; padding:.55rem .8rem }
.file-btn input{ display:none }

/* Empty */
.empty-state{ min-height: calc(100dvh - 64px); display:grid; place-items:center; gap:12px; text-align:center }
.muted{ color:var(--muted) }

/* Items */
.items-section{ padding: 12px; max-width:840px; margin: 0 auto }
.list-header{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin: 6px 2px 10px }
.year-heading{ margin:0; font-size:20px; font-weight:700; letter-spacing:.4px }
.items-list{ display:grid; gap:10px; }
.card{
  background: var(--card);
  border: 1px solid rgba(255,255,255,.06);
  border-radius: 18px;
  padding: 12px;
  box-shadow: var(--shadow);
}
.card-row{ display:flex; align-items:center; justify-content:space-between; gap:10px }
.card-title{ font-weight:700 }
.card-date{ color:var(--muted); font-variant-numeric: tabular-nums }
.card-notes{ margin-top:6px; color:#bfc2ce; white-space:pre-wrap }
.card-actions{ display:flex; gap:8px; margin-top:10px }

/* Modal */
.modal{ border:0; padding:0; background: transparent }
.modal::backdrop{ background: rgba(0,0,0,.55) }
.modal-card{
  background: var(--panel);
  border: 1px solid rgba(255,255,255,.06);
  border-radius: 18px; width: min(560px, calc(100% - 24px));
  padding: 14px; margin: auto; color: var(--text); box-shadow: var(--shadow)
}
.modal-card h3{ margin:4px 0 12px }
.field{ display:grid; gap:6px; margin:10px 0 }
.field input, .field textarea, .modal-card select{
  width:100%; background: #15161a; color: var(--text);
  border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:.65rem .8rem; outline: none;
}
.field input:focus, .field textarea:focus, .modal-card select:focus{ box-shadow: 0 0 0 6px var(--ring); border-color: transparent }
.actions{ display:flex; justify-content:flex-end; gap:8px; margin-top:8px }

/* Light theme vars */
html[data-theme="light"]{
  --bg:#f8f9fb;
  --panel:#ffffff;
  --muted:#6b7280;
  --text:#0f172a;
  --accent:#7c5cff;
  --accent-2:#3a82f6;
  --danger:#b91c1c;
  --card:#ffffff;
  --ring:rgba(58,130,246,.30);
  --shadow: 0 10px 20px rgba(2,6,23,.08);
}
@media (prefers-color-scheme: light){
  html:not([data-theme="dark"]){
    --bg:#f8f9fb;
    --panel:#ffffff;
    --muted:#6b7280;
    --text:#0f172a;
    --accent:#7c5cff;
    --accent-2:#3a82f6;
    --danger:#b91c1c;
    --card:#ffffff;
    --ring:rgba(58,130,246,.30);
    --shadow: 0 10px 20px rgba(2,6,23,.08);
  }
}
html[data-theme="dark"]{
  --bg:#121214;
  --panel:#1c1d22;
  --muted:#8b8d97;
  --text:#eaeaf0;
  --accent:#7c5cff;
  --accent-2:#3a82f6;
  --danger:#ef4444;
  --card:#20222a;
  --ring:rgba(124,92,255,.35);
  --shadow: 0 6px 20px rgba(0,0,0,.35);
}
.switch-row{ display:flex; align-items:center; gap:.6rem; margin-top:.5rem }
.drawer-footer .small{ width:100%; text-align:center }
